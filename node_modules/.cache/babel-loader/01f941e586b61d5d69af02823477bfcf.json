{"ast":null,"code":"import _classCallCheck from \"/home/tony/github/tmp/leftover/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/tony/github/tmp/leftover/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/tony/github/tmp/leftover/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/tony/github/tmp/leftover/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/tony/github/tmp/leftover/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/tony/github/tmp/leftover/src/containers/Receips/ReceipsPage.jsx\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport IngredientNavbar from '../../components/Navbar/IngredientNavbar';\nimport ReceipListItem from '../../components/ReceipListItem';\nimport SearchBar from '../../components/SearchBar/SearchBar';\nimport ButtonSwag from '../../components/ButtonSwag/ButtonSwag';\nimport { getBDDPlats } from '../../APIManager';\n\nvar ReceipsList = function ReceipsList(_ref) {\n  var list = _ref.list;\n  return React.createElement(\"div\", {\n    className: \"list\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 11\n    },\n    __self: this\n  }, list.map(function (item) {\n    return React.createElement(\"div\", {\n      key: item.name,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 13\n      },\n      __self: this\n    }, React.createElement(ReceipListItem, {\n      key: item.name,\n      item: item,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 14\n      },\n      __self: this\n    }));\n  }));\n};\n\nReceipsList.propTypes = {\n  list: PropTypes.arrayOf(PropTypes.shape({\n    name: PropTypes.string.isRequired,\n    pic: PropTypes.string.isRequired,\n    ingredients: PropTypes.arrayOf(PropTypes.shape({\n      name: PropTypes.string.isRequired,\n      pic: PropTypes.string.isRequired\n    })),\n    steps: PropTypes.arrayOf(PropTypes.string.isRequired),\n    time: PropTypes.string.isRequired\n  }).isRequired).isRequired\n};\n\nvar ReceipsPage =\n/*#__PURE__*/\nfunction (_React$PureComponent) {\n  _inherits(ReceipsPage, _React$PureComponent);\n\n  function ReceipsPage(props) {\n    var _this;\n\n    _classCallCheck(this, ReceipsPage);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ReceipsPage).call(this, props));\n\n    _this.getReceips = function (ingredients) {\n      getBDDPlats(ingredients).then(function (list) {\n        _this.dbReceips = list;\n\n        _this.setState({\n          list: list\n        });\n      }).catch(function (error) {\n        _this.setState({\n          error: error\n        });\n      });\n    };\n\n    _this.filter = function (text) {\n      if (text) {\n        var lowerText = text.toLowerCase();\n\n        var list = _this.dbReceips.filter(function (item) {\n          return item.name.toLowerCase().includes(lowerText);\n        });\n\n        _this.setState({\n          list: list\n        });\n      } else {\n        _this.setState({\n          list: _this.dbReceips\n        });\n      }\n    };\n\n    var _ingredients = _this.props.ingredients;\n    _this.dbReceips = [];\n    _this.state = {\n      list: [],\n      error: ''\n    };\n\n    _this.getReceips(_ingredients);\n\n    return _this;\n  }\n\n  _createClass(ReceipsPage, [{\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      var ingredients = this.props.ingredients;\n\n      if (nextProps.ingredients !== ingredients) {\n        this.getReceips(nextProps.ingredients);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          list = _this$state.list,\n          error = _this$state.error;\n      var history = this.props.history;\n      return React.createElement(\"div\", {\n        className: \"page\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"page-content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, React.createElement(IngredientNavbar, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"row center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, \"Choose a receip\")), React.createElement(\"div\", {\n        className: \"row\",\n        style: {\n          marginBottom: 20\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, React.createElement(ButtonSwag, {\n        text: \"Back to ingredients\",\n        style: {\n          marginLeft: '3%'\n        },\n        onClick: function onClick() {\n          return history.push('ingredients');\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }), React.createElement(SearchBar, {\n        holder: \"Search receip...\",\n        changeHandler: this.filter,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      })), error ? React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, error) : React.createElement(ReceipsList, {\n        list: list,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return ReceipsPage;\n}(React.PureComponent);\n\nReceipsPage.propTypes = {\n  ingredients: PropTypes.arrayOf(PropTypes.objectOf(PropTypes.string, PropTypes.string)).isRequired,\n  history: PropTypes.shape({\n    length: PropTypes.number,\n    search: PropTypes.string,\n    hash: PropTypes.string\n  }).isRequired\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    ingredients: state.ingredients.list\n  };\n};\n\nexport default connect(mapStateToProps)(ReceipsPage);","map":{"version":3,"sources":["/home/tony/github/tmp/leftover/src/containers/Receips/ReceipsPage.jsx"],"names":["React","PropTypes","connect","IngredientNavbar","ReceipListItem","SearchBar","ButtonSwag","getBDDPlats","ReceipsList","list","map","item","name","propTypes","arrayOf","shape","string","isRequired","pic","ingredients","steps","time","ReceipsPage","props","getReceips","then","dbReceips","setState","catch","error","filter","text","lowerText","toLowerCase","includes","state","nextProps","history","marginBottom","marginLeft","push","PureComponent","objectOf","length","number","search","hash","mapStateToProps"],"mappings":"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","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport IngredientNavbar from '../../components/Navbar/IngredientNavbar';\nimport ReceipListItem from '../../components/ReceipListItem';\nimport SearchBar from '../../components/SearchBar/SearchBar';\nimport ButtonSwag from '../../components/ButtonSwag/ButtonSwag';\nimport { getBDDPlats } from '../../APIManager';\n\nconst ReceipsList = ({ list }) => (\n  <div className=\"list\">\n    {list.map(item => (\n      <div key={item.name}>\n        <ReceipListItem key={item.name} item={item} />\n      </div>\n    ))}\n  </div>\n);\n\nReceipsList.propTypes = {\n  list: PropTypes.arrayOf(\n    PropTypes.shape({\n      name: PropTypes.string.isRequired,\n      pic: PropTypes.string.isRequired,\n      ingredients: PropTypes.arrayOf(\n        PropTypes.shape({\n          name: PropTypes.string.isRequired,\n          pic: PropTypes.string.isRequired,\n        }),\n      ),\n      steps: PropTypes.arrayOf(PropTypes.string.isRequired),\n      time: PropTypes.string.isRequired,\n    }).isRequired,\n  ).isRequired,\n};\n\nclass ReceipsPage extends React.PureComponent {\n  static propTypes = {\n    ingredients: PropTypes.arrayOf(\n      PropTypes.objectOf(PropTypes.string, PropTypes.string),\n    ).isRequired,\n    history: PropTypes.shape({\n      length: PropTypes.number,\n      search: PropTypes.string,\n      hash: PropTypes.string,\n    }).isRequired,\n  }\n\n  constructor(props) {\n    super(props);\n    const { ingredients } = this.props;\n    this.dbReceips = [];\n    this.state = {\n      list: [],\n      error: '',\n    };\n    this.getReceips(ingredients);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const { ingredients } = this.props;\n    if (nextProps.ingredients !== ingredients) {\n      this.getReceips(nextProps.ingredients);\n    }\n  }\n\n  getReceips = (ingredients) => {\n    getBDDPlats(ingredients)\n      .then((list) => {\n        this.dbReceips = list;\n        this.setState({ list });\n      })\n      .catch((error) => {\n        this.setState({ error });\n      });\n  }\n\n  filter = (text) => {\n    if (text) {\n      const lowerText = text.toLowerCase();\n      const list = this.dbReceips.filter(item => (\n        item.name.toLowerCase().includes(lowerText)\n      ));\n      this.setState({ list });\n    } else {\n      this.setState({ list: this.dbReceips });\n    }\n  };\n\n  render() {\n    const { list, error } = this.state;\n    const { history } = this.props;\n    return (\n      <div className=\"page\">\n        <div className=\"page-content\">\n          <IngredientNavbar />\n          <div className=\"row center\">\n            <h1>Choose a receip</h1>\n          </div>\n          <div className=\"row\" style={{ marginBottom: 20 }}>\n            <ButtonSwag text=\"Back to ingredients\" style={{ marginLeft: '3%' }} onClick={() => history.push('ingredients')} />\n            <SearchBar holder=\"Search receip...\" changeHandler={this.filter} />\n          </div>\n          { error ? <p>{error}</p>\n            : <ReceipsList list={list} /> }\n        </div>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({ ingredients: state.ingredients.list });\n\nexport default connect(mapStateToProps)(ReceipsPage);\n"]},"metadata":{},"sourceType":"module"}
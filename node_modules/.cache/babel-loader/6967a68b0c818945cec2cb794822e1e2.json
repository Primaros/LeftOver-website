{"ast":null,"code":"import _classCallCheck from \"/home/tony/github/LeftOver-website/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/tony/github/LeftOver-website/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/tony/github/LeftOver-website/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/tony/github/LeftOver-website/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/tony/github/LeftOver-website/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/tony/github/LeftOver-website/src/containers/Receips/ReceipsPage.jsx\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport IngredientNavbar from '../../components/Navbar/IngredientNavbar';\nimport ReceipListItem from '../../components/ReceipListItem';\nimport SearchBar from '../../components/SearchBar/SearchBar';\nimport ButtonSwag from '../../components/ButtonSwag/ButtonSwag';\nimport { getBDDPlats } from '../../APIManager';\n\nvar ReceipsPage =\n/*#__PURE__*/\nfunction (_React$PureComponent) {\n  _inherits(ReceipsPage, _React$PureComponent);\n\n  function ReceipsPage(props) {\n    var _this;\n\n    _classCallCheck(this, ReceipsPage);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ReceipsPage).call(this, props));\n\n    _this.getReceips = function (ingredients) {\n      getBDDPlats(ingredients).then(function (list) {\n        _this.dbReceips = list;\n\n        _this.setState({\n          list: list\n        });\n      }).catch(function (error) {\n        _this.setState({\n          error: error\n        });\n      });\n    };\n\n    _this.getReceipsList = function (list) {\n      return React.createElement(\"div\", {\n        className: \"list\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53\n        },\n        __self: this\n      }, list.map(function (item) {\n        return React.createElement(\"div\", {\n          key: item.name,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 55\n          },\n          __self: this\n        }, React.createElement(ReceipListItem, {\n          key: item.name,\n          item: item,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 56\n          },\n          __self: this\n        }));\n      }));\n    };\n\n    _this.filter = function (text) {\n      if (text) {\n        var lowerText = text.toLowerCase();\n\n        var list = _this.dbReceips.filter(function (item) {\n          return item.name.toLowerCase().includes(lowerText);\n        });\n\n        _this.setState({\n          list: list\n        });\n      } else {\n        _this.setState({\n          list: _this.dbReceips\n        });\n      }\n    };\n\n    var _ingredients = _this.props.ingredients;\n    _this.dbReceips = [];\n    _this.state = {\n      list: [],\n      error: ''\n    };\n\n    _this.getReceips(_ingredients);\n\n    return _this;\n  }\n\n  _createClass(ReceipsPage, [{\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      var ingredients = this.props.ingredients;\n\n      if (nextProps.ingredients !== ingredients) {\n        this.getReceips(nextProps.ingredients);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          list = _this$state.list,\n          error = _this$state.error;\n      var history = this.props.history;\n      return React.createElement(\"div\", {\n        className: \"page\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"page-content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, React.createElement(IngredientNavbar, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"row center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, \"Choose a receip\")), React.createElement(\"div\", {\n        className: \"row\",\n        style: {\n          marginBottom: 20\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, React.createElement(ButtonSwag, {\n        text: \"Back to ingredients\",\n        style: {\n          marginLeft: '3%'\n        },\n        onClick: function onClick() {\n          return history.push('ingredients');\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }), React.createElement(SearchBar, {\n        holder: \"Search receip...\",\n        changeHandler: this.filter,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      })), error ? React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, error) : this.getReceipsList(list)));\n    }\n  }]);\n\n  return ReceipsPage;\n}(React.PureComponent);\n\nReceipsPage.propTypes = {\n  ingredients: PropTypes.arrayOf(PropTypes.objectOf(PropTypes.string.isRequired, PropTypes.string.isRequired)).isRequired,\n  history: PropTypes.shape({\n    length: PropTypes.number.isRequired,\n    search: PropTypes.string.isRequired,\n    hash: PropTypes.string.isRequired,\n    push: PropTypes.func.isRequired\n  }).isRequired\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    ingredients: state.ingredients.list\n  };\n};\n\nexport default connect(mapStateToProps)(ReceipsPage);","map":{"version":3,"sources":["/home/tony/github/LeftOver-website/src/containers/Receips/ReceipsPage.jsx"],"names":["React","PropTypes","connect","IngredientNavbar","ReceipListItem","SearchBar","ButtonSwag","getBDDPlats","ReceipsPage","props","getReceips","ingredients","then","list","dbReceips","setState","catch","error","getReceipsList","map","item","name","filter","text","lowerText","toLowerCase","includes","state","nextProps","history","marginBottom","marginLeft","push","PureComponent","propTypes","arrayOf","objectOf","string","isRequired","shape","length","number","search","hash","func","mapStateToProps"],"mappings":"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","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport IngredientNavbar from '../../components/Navbar/IngredientNavbar';\nimport ReceipListItem from '../../components/ReceipListItem';\nimport SearchBar from '../../components/SearchBar/SearchBar';\nimport ButtonSwag from '../../components/ButtonSwag/ButtonSwag';\nimport { getBDDPlats } from '../../APIManager';\n\nclass ReceipsPage extends React.PureComponent {\n  static propTypes = {\n    ingredients: PropTypes.arrayOf(\n      PropTypes.objectOf(PropTypes.string.isRequired, PropTypes.string.isRequired),\n    ).isRequired,\n    history: PropTypes.shape({\n      length: PropTypes.number.isRequired,\n      search: PropTypes.string.isRequired,\n      hash: PropTypes.string.isRequired,\n      push: PropTypes.func.isRequired,\n    }).isRequired,\n  }\n\n  constructor(props) {\n    super(props);\n    const { ingredients } = this.props;\n    this.dbReceips = [];\n    this.state = {\n      list: [],\n      error: '',\n    };\n    this.getReceips(ingredients);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const { ingredients } = this.props;\n    if (nextProps.ingredients !== ingredients) {\n      this.getReceips(nextProps.ingredients);\n    }\n  }\n\n  getReceips = (ingredients) => {\n    getBDDPlats(ingredients)\n      .then((list) => {\n        this.dbReceips = list;\n        this.setState({ list });\n      })\n      .catch((error) => {\n        this.setState({ error });\n      });\n  }\n\n  getReceipsList = list => (\n    <div className=\"list\">\n      {list.map(item => (\n        <div key={item.name}>\n          <ReceipListItem key={item.name} item={item} />\n        </div>\n      ))}\n    </div>\n  )\n\n  filter = (text) => {\n    if (text) {\n      const lowerText = text.toLowerCase();\n      const list = this.dbReceips.filter(item => (\n        item.name.toLowerCase().includes(lowerText)\n      ));\n      this.setState({ list });\n    } else {\n      this.setState({ list: this.dbReceips });\n    }\n  };\n\n  render() {\n    const { list, error } = this.state;\n    const { history } = this.props;\n    return (\n      <div className=\"page\">\n        <div className=\"page-content\">\n          <IngredientNavbar />\n          <div className=\"row center\">\n            <h1>Choose a receip</h1>\n          </div>\n          <div className=\"row\" style={{ marginBottom: 20 }}>\n            <ButtonSwag text=\"Back to ingredients\" style={{ marginLeft: '3%' }} onClick={() => history.push('ingredients')} />\n            <SearchBar holder=\"Search receip...\" changeHandler={this.filter} />\n          </div>\n          { error ? <p>{error}</p>\n            : this.getReceipsList(list) }\n        </div>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({ ingredients: state.ingredients.list });\n\nexport default connect(mapStateToProps)(ReceipsPage);\n"]},"metadata":{},"sourceType":"module"}